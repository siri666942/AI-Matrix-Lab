# AI Matrix Lab需求文档

## 1. 应用概述

### 1.1 应用名称
AI Matrix Lab

### 1.2 应用描述
一个基于Python的线性代数可视化实验室，通过Streamlit构建交互式界面，允许用户通过自然语言或手动输入的方式创建和操作2x2矩阵，实时可视化矩阵变换对图形的影响，并展示行列式、特征值等数学属性。\n
## 2. 功能需求

### 2.1 核心功能

#### 2.1.1 界面布局
- 采用左右两栏布局：左侧为控制区，右侧为展示区
- 使用Streamlit的st.columns进行布局管理

#### 2.1.2 左侧控制区功能
- **自然语言输入**：顶部文本输入框，支持用户描述变换（如Rotate 45 degrees、Shear by 2）\n- **矩阵手动输入**：2x2网格的数字输入框，默认为单位矩阵[[1,0],[0,1]]\n- **AI矩阵转换**：调用OpenAI API将自然语言转换为2x2矩阵
- **数学属性显示**：实时计算并显示矩阵的行列式和特征值
- **预设按钮**：提供常见变换的快速演示（Rotate 90、Reflect X-axis、Squeeze等）\n- **Mock AI开关**：测试模式下使用本地规则模拟API响应

#### 2.1.3 右侧展示区功能
- **坐标系绘制**：标准的xy坐标系，带有网格线
- **图形变换可视化**\n  - 显示原始图形（蓝色虚线，alpha=0.5）\n  - 显示变换后图形（红色实线）\n  - 支持多种原始图形（单位正方形、F字形等）\n  - 固定绘图区域为x=[-5,5]和y=[-5,5]\n- **特征向量箭头**：绿色箭头显示特征向量，仅当特征值为实数时显示
- **动态更新**：输入变化时自动重新绘制图形

### 2.2 数学计算功能
- 使用NumPy进行矩阵运算
- 计算行列式：numpy.linalg.det(matrix)\n- 计算特征值和特征向量：numpy.linalg.eig(matrix)\n- 矩阵乘法：np.dot(matrix, points)\n
### 2.3 AI集成功能
- 调用OpenAI API进行自然语言到矩阵的转换
- 系统提示：\"You are a math engine. Convert user text into a 2x2 Python list representing the matrix. ONLY return the JSON list, no text. Example: [[0, -1], [1, 0]]\"\n- 错误处理：API调用失败或返回无效JSON时显示错误提示
- Mock模式：本地模拟API响应，支持基本变换命令

## 3. 技术栈

### 3.1 开发语言
Python

### 3.2 前端框架
Streamlit - 用于快速构建交互式Web应用

### 3.3 数学计算库
NumPy - 用于矩阵运算和线性代数计算

### 3.4 可视化库
Matplotlib - 用于绘制坐标系和图形变换

### 3.5 AI API
OpenAI API - 用于自然语言处理
兼容DeepSeek、Moonshot等其他兼容API

## 4. 开发工作流

### 4.1 阶段一：搭建静态骨架
- 环境配置：安装streamlit、numpy、matplotlib、openai
- 编写绘图函数（utils.py）：定义基础图形和plot_transformation函数
- 构建界面（app.py）：放置4个数字输入框并连接绘图功能
- 里程碑：手动修改数字时图形能够实时变化

### 4.2 阶段二：实现数学属性计算
- 添加行列式和特征值计算逻辑
- 在左侧栏显示计算结果和公式
- 添加矩阵不可逆时的提示信息

### 4.3 阶段三：接入AI功能
- 实现自然语言到矩阵的转换
- 集成OpenAI API调用
- 添加Mock AI测试模式
- 连接AI输入与矩阵更新流程

### 4.4 阶段四：润色与演示准备
- 添加预设DEMO按钮
- 优化特征向量可视化
- 完善界面样式和用户体验
- 准备演示文档和说明

## 5. 设计风格

### 5.1 配色方案
- 主色调：深蓝色(#2e86c1)和红色(#e74c3c)对比色系
- 辅助色：绿色(#28b463)用于特征向量，灰色(#95a5a6)用于网格线
- 背景色：浅灰白色(#f8f9fa)，营造专业学术氛围

### 5.2 视觉细节
- 图标风格：线性图标配合填充色块，简洁现代
- 按钮设计：圆角矩形按钮，悬停时有渐变效果
- 数学公式：使用LaTeX渲染，确保专业性和可读性

### 5.3 整体布局
- 卡片式布局：左右分区明确，信息层次清晰
- 响应式设计：适配不同屏幕尺寸的显示效果
- 视觉平衡：左侧控件密度适中，右侧留足绘图空间